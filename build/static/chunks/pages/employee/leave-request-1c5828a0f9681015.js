(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6752],{5325:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>o});var s=t(37876),l=t(14232),r=t(91040),n=t(37503);function o(){let[e,a]=(0,l.useState)({empid:"",name:"",leave_type:"",from_date:"",to_date:"",reason:"",attachment:null}),[t,o]=(0,l.useState)([]),[d,i]=(0,l.useState)([]);(0,l.useEffect)(()=>{r.A.get("/api/leave/types").then(e=>o(e.data)).catch(e=>console.error("Error fetching leave types:",e));let e=localStorage.getItem("user");if(e){let t=JSON.parse(e);a(e=>({...e,empid:t.empid,name:t.name})),r.A.get("/api/leave/status?empid=".concat(t.empid)).then(e=>i(e.data)).catch(e=>console.error("Failed to fetch leave status:",e))}},[]);let c=e=>{let{name:t,value:s,files:l}=e.target;"attachment"===t?a(e=>({...e,attachment:l[0]})):a(e=>({...e,[t]:s}))},u=async t=>{t.preventDefault();let s=new FormData;for(let a in e)s.append(a,e[a]);try{await r.A.post("/api/leave/request",s),alert("Leave request submitted successfully"),a(e=>({...e,leave_type:"",from_date:"",to_date:"",reason:"",attachment:null}));let t=await r.A.get("/api/leave/status?empid=".concat(e.empid));i(t.data)}catch(e){console.error(e),alert("Submission failed")}};return(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)(n.A,{}),(0,s.jsxs)("div",{className:"flex-grow p-8 bg-indigo-50 flex gap-8",children:[(0,s.jsx)("div",{className:"w-2/3",children:(0,s.jsxs)("form",{onSubmit:u,className:"space-y-6 bg-white p-10 rounded-lg shadow-lg ",children:[(0,s.jsx)("h1",{className:" w-full text-3xl font-extrabold mb-8 text-center text-indigo-800",children:"Apply for Leave"}),(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsx)("input",{type:"text",value:e.name,readOnly:!0,className:"w-full p-3 border-2 border-indigo-300 rounded-lg bg-gray-100"}),(0,s.jsx)("input",{type:"text",value:e.empid,readOnly:!0,className:"w-full p-3 border-2 border-indigo-300 rounded-lg bg-gray-100"}),(0,s.jsxs)("select",{name:"leave_type",value:e.leave_type,onChange:c,required:!0,className:"w-full p-3 border-2 border-indigo-300 rounded-lg",children:[(0,s.jsx)("option",{value:"",children:"Select Leave Type"}),(0,s.jsx)("option",{value:"Sick Leave",children:"Sick Leave"}),(0,s.jsx)("option",{value:"Casual Leave",children:"Casual Leave"}),(0,s.jsx)("option",{value:"Earned Leave",children:"Earned Leave"}),(0,s.jsx)("option",{value:"Maternity Leave",children:"Maternity Leave"}),(0,s.jsx)("option",{value:"Unpaid Leave",children:"Unpaid Leave"})]}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("input",{type:"date",name:"from_date",value:e.from_date,onChange:c,required:!0,className:"w-full p-3 border-2 border-indigo-300 rounded-lg"}),(0,s.jsx)("input",{type:"date",name:"to_date",value:e.to_date,onChange:c,required:!0,className:"w-full p-3 border-2 border-indigo-300 rounded-lg"})]}),(0,s.jsx)("textarea",{name:"reason",value:e.reason,placeholder:"Reason for leave",onChange:c,required:!0,className:"w-full p-3 border-2 border-indigo-300 rounded-lg"}),(0,s.jsx)("input",{type:"file",name:"attachment",onChange:c,className:"w-full p-3 border-2 border-indigo-300 rounded-lg"}),(0,s.jsx)("button",{type:"submit",className:"w-full bg-indigo-600 text-white py-3 rounded-lg hover:bg-indigo-700 transition",children:"Submit Request"})]})]})}),(0,s.jsxs)("div",{className:"w-1/3 bg-white p-6 rounded-2xl shadow-xl overflow-y-auto max-h-[600px] border border-indigo-100",children:[(0,s.jsx)("h1",{className:" w-full text-3xl font-extrabold mb-8 text-center text-indigo-800",children:"Your Leave Requests"}),d.length>0?(0,s.jsx)("div",{className:"space-y-4",children:d.map((e,a)=>(0,s.jsxs)("div",{className:"border border-gray-200 rounded-xl p-5 bg-indigo-50 shadow-sm transition hover:shadow-md",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-indigo-700",children:e.leave_type}),(0,s.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-semibold ".concat("Approved"===e.status?"bg-green-100 text-green-700":"Rejected"===e.status?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"),children:e.status})]}),(0,s.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,s.jsx)("strong",{children:"From:"})," ",e.from_date]}),(0,s.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,s.jsx)("strong",{children:"To:"})," ",e.to_date]})]},a))}):(0,s.jsx)("p",{className:"text-center text-gray-500",children:"No leave requests found."})]})]})]})}},37503:(e,a,t)=>{"use strict";t.d(a,{A:()=>n});var s=t(37876),l=t(14232),r=t(89099);function n(e){let{handleLogout:a}=e,t=(0,r.useRouter)(),[n,o]=(0,l.useState)(!1),[d,i]=(0,l.useState)(!1),[c,u]=(0,l.useState)(null);(0,l.useEffect)(()=>{let e=JSON.parse(localStorage.getItem("employee"));e&&u(e)},[]);let p=async()=>{let e=JSON.parse(localStorage.getItem("employee")),a=n?"checkout":"checkin",t=await fetch("/api/employee/".concat(a),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({empid:e.empid})}),s=await t.json();t.ok?(o(!n),alert(s.message+(s.hours?"(Worked: ".concat(s.hours," hrs)"):""))):alert(s.error)};return(0,s.jsxs)("div",{className:"min-h-screen w-72 bg-gray-900 text-white p-6 shadow-lg",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,s.jsx)("h1",{className:"text-sm font-semibold text-white",children:"Office Work"}),(0,s.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",className:"sr-only peer",checked:n,onChange:p,disabled:d}),(0,s.jsx)("div",{className:"w-12 h-7 bg-gray-600 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-indigo-500 rounded-full peer peer-checked:bg-indigo-500 transition-colors duration-300"}),(0,s.jsx)("div",{className:"absolute left-1 w-5 h-5 rounded-full shadow-md bg-white transition-transform duration-300 transform peer-checked:translate-x-full"})]})]}),(0,s.jsxs)("ul",{className:"space-y-4",children:[[{name:"Dashboard",path:"/employee/dashboard"},{name:"Profile Management",path:"/employee/profile"},{name:"Leave Requests & Status Tracking",path:"/employee/leave-request"},{name:"Payslips & Documents",path:"/employee/documents"}].map(e=>(0,s.jsx)("li",{children:(0,s.jsx)("button",{onClick:()=>t.push(e.path),className:"w-full text-left px-4 py-3 rounded-lg transition ".concat(t.pathname===e.path?"bg-indigo-600":"bg-gray-800 hover:bg-indigo-600"),children:e.name})},e.name)),(0,s.jsx)("li",{children:(0,s.jsx)("button",{onClick:a,className:"w-full text-left px-4 py-3 bg-red-600 hover:bg-red-700 transition rounded-lg mt-6",children:"Logout"})})]})]})}},87028:(e,a,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/employee/leave-request",function(){return t(5325)}])}},e=>{var a=a=>e(e.s=a);e.O(0,[2615,1040,636,6593,8792],()=>a(87028)),_N_E=e.O()}]);