"use strict";(()=>{var e={};e.id=9467,e.ids=[9467],e.modules={2983:(e,a,r)=>{r.d(a,{A:()=>s});let t=require("mysql2/promise"),s=r.n(t)().createPool({host:process.env.DB_HOST,user:process.env.DB_USER,password:process.env.DB_PASSWORD,database:process.env.DB_NAME})},3480:(e,a,r)=>{e.exports=r(5600)},5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6435:(e,a)=>{Object.defineProperty(a,"M",{enumerable:!0,get:function(){return function e(a,r){return r in a?a[r]:"then"in a&&"function"==typeof a.then?a.then(a=>e(a,r)):"function"==typeof a&&"default"===r?a:void 0}}})},8667:(e,a)=>{Object.defineProperty(a,"A",{enumerable:!0,get:function(){return r}});var r=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},9686:(e,a,r)=>{r.r(a),r.d(a,{config:()=>u,default:()=>d,routeModule:()=>p});var t={};r.r(t),r.d(t,{default:()=>i});var s=r(3480),o=r(8667),n=r(6435),l=r(2983);async function i(e,a){if("POST"!==e.method)return a.status(405).json({message:"Method not allowed"});let{empid:r,month:t,year:s,basic_salary:o,hra:n,da:i,allowances:d,deductions:u,pf:p,ptax:c,esic:P}=e.body;if(!r||!t||!s||!o)return a.status(400).json({message:"Missing required fields"});let f=parseFloat(o)||0,A=parseFloat(n)||0,m=parseFloat(i)||0,y=parseFloat(d)||0,E=parseFloat(u)||0,g=parseFloat(p)||0,h=parseFloat(c)||0,_=parseFloat(P)||0;try{let[e]=await l.A.execute(`INSERT INTO payroll 
        (empid, month, year, basic_salary, hra, da, allowances, pf, ptax, esic, deductions, net_pay) 
        VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`,[r,t,s,f,A,m,y,g,h,_,E,f+A+m+y-(E+g+h+_)]);a.status(200).json({message:"Payroll added successfully"})}catch(e){console.error("Error adding payroll:",e),a.status(500).json({message:"Database error"})}}let d=(0,n.M)(t,"default"),u=(0,n.M)(t,"config"),p=new s.PagesAPIRouteModule({definition:{kind:o.A.PAGES_API,page:"/api/hr/payroll/add",pathname:"/api/hr/payroll/add",bundlePath:"",filename:""},userland:t})}};var a=require("../../../../webpack-api-runtime.js");a.C(e);var r=a(a.s=9686);module.exports=r})();