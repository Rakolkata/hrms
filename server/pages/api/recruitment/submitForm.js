"use strict";(()=>{var e={};e.id=8748,e.ids=[8748],e.modules={37:e=>{e.exports=import("uuid")},2983:(e,r,t)=>{t.d(r,{A:()=>n});let a=require("mysql2/promise"),n=t.n(a)().createPool({host:process.env.DB_HOST,user:process.env.DB_USER,password:process.env.DB_PASSWORD,database:process.env.DB_NAME})},3480:(e,r,t)=>{e.exports=t(5600)},3873:e=>{e.exports=require("path")},4362:(e,r,t)=>{t.a(e,async(e,a)=>{try{t.r(r),t.d(r,{config:()=>u,default:()=>d,routeModule:()=>p});var n=t(3480),o=t(8667),i=t(6435),s=t(8832),c=e([s]);s=(c.then?(await c)():c)[0];let d=(0,i.M)(s,"default"),u=(0,i.M)(s,"config"),p=new n.PagesAPIRouteModule({definition:{kind:o.A.PAGES_API,page:"/api/recruitment/submitForm",pathname:"/api/recruitment/submitForm",bundlePath:"",filename:""},userland:s});a()}catch(e){a(e)}})},5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6435:(e,r)=>{Object.defineProperty(r,"M",{enumerable:!0,get:function(){return function e(r,t){return t in r?r[t]:"then"in r&&"function"==typeof r.then?r.then(r=>e(r,t)):"function"==typeof r&&"default"===t?r:void 0}}})},7313:e=>{e.exports=import("formidable")},8667:(e,r)=>{Object.defineProperty(r,"A",{enumerable:!0,get:function(){return t}});var t=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},8832:(e,r,t)=>{t.a(e,async(e,a)=>{try{t.r(r),t.d(r,{config:()=>f,default:()=>l});var n=t(7313),o=t(9021),i=t.n(o),s=t(3873),c=t.n(s),d=t(37),u=t(2983),p=e([n,d]);[n,d]=p.then?(await p)():p;let f={api:{bodyParser:!1}};async function l(e,r){if("POST"!==e.method)return r.status(405).json({error:"Method not allowed"});let t=c().join(process.cwd(),"/public/uploads");i().existsSync(t)||i().mkdirSync(t,{recursive:!0}),(0,n.default)({uploadDir:t,keepExtensions:!0,multiples:!0}).parse(e,async(e,t,a)=>{if(e)return console.error("Error parsing form:",e),r.status(500).json({error:"Error parsing form data"});try{let e=t.candidate_id?.[0],n=t.name?.[0],o=t.email?.[0],i=t.contact_no?.[0],s=t.address?.[0],p=t.gender?.[0],l=t.dob?.[0],f=t.bank_details?.[0],m=(0,d.v4)().split("-")[0],_=e=>e&&e[0]?`/uploads/${c().basename(e[0].filepath)}`:null,P={aadhar_card:_(a.aadhar_card),pan_card:_(a.pan_card),education_certificates:_(a.education_certificates),resume:_(a.resume),experience_certificate:_(a.experience_certificate),profile_photo:_(a.profile_photo)};return console.log("File paths:",P),await u.A.execute(`INSERT INTO employees (
          candidate_id, name, email, contact_no, password, address, gender, dob,
          aadhar_card, pan_card, education_certificates, resume, experience_certificate,
          bank_details, profile_photo
        ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`,[e,n,o,i,m,s,p,l,P.aadhar_card,P.pan_card,P.education_certificates,P.resume,P.experience_certificate,f,P.profile_photo]),r.status(200).json({message:"Form submitted and data saved."})}catch(e){return console.error("Error saving form data:",e),r.status(500).json({error:"Error saving form data"})}})}a()}catch(e){a(e)}})},9021:e=>{e.exports=require("fs")}};var r=require("../../../webpack-api-runtime.js");r.C(e);var t=r(r.s=4362);module.exports=t})();