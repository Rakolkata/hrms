(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1581],{8643:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var n=a(37876),l=a(89099),r=a(14232),s=a(21575),c=a(30822);function i(e){let{handleLogout:t}=e,a=(0,l.useRouter)(),[i,o]=(0,r.useState)(!1),[d,p]=(0,r.useState)(!1),[u,m]=(0,r.useState)(!1),[x,h]=(0,r.useState)(!1);return(0,n.jsxs)("div",{className:"min-h-screen w-72 bg-gray-900 text-white p-6 shadow-lg",children:[(0,n.jsx)("h2",{className:"text-3xl font-bold mb-8",children:"HRMS Panel"}),(0,n.jsxs)("ul",{className:"space-y-4",children:[[{name:"Dashboard",path:"/dashboard"},{name:"Add Employee",path:"/registerEmployee"},{name:"View Employees Details",path:"/employeeList"},{name:"Recruitment Management",path:"/Recruitment/recruitment"},{name:"Reporting and Analytics",path:"/ViewDetails"},{name:"Compliance management",path:"/compliance"},{name:"Performance Management",path:"/compliance"}].map(e=>(0,n.jsx)("li",{children:(0,n.jsx)("button",{onClick:()=>a.push(e.path),className:"w-full text-left px-4 py-3 bg-gray-800 rounded-lg hover:bg-indigo-600 transition",children:e.name})},e.name)),(0,n.jsxs)("li",{children:[(0,n.jsxs)("button",{onClick:()=>{o(!i)},className:"w-full text-left flex justify-between items-center px-4 py-3 bg-gray-800 rounded-lg hover:bg-indigo-600 transition",children:[(0,n.jsx)("span",{children:"Attendance & Leave Management"}),i?(0,n.jsx)(s.A,{size:18}):(0,n.jsx)(c.A,{size:18})]}),i&&(0,n.jsx)("ul",{className:"pl-6 pt-2 space-y-2",children:[{name:"Attendance",path:"/hr/attendance"},{name:"Leave Management",path:"/hr/view-leave-requests"},{name:"Attendance Analytics",path:"/attendance/analytics"}].map(e=>(0,n.jsx)("li",{children:(0,n.jsx)("button",{onClick:()=>a.push(e.path),className:"w-full text-left text-sm px-3 py-2 bg-gray-700 rounded-lg hover:bg-indigo-500 transition",children:e.name})},e.name))})]}),(0,n.jsxs)("li",{children:[(0,n.jsxs)("button",{onClick:()=>{p(!d)},className:"w-full text-left flex justify-between items-center px-4 py-3 bg-gray-800 rounded-lg hover:bg-indigo-600 transition",children:[(0,n.jsx)("span",{children:"Payroll Management"}),d?(0,n.jsx)(s.A,{size:18}):(0,n.jsx)(c.A,{size:18})]}),d&&(0,n.jsx)("ul",{className:"pl-6 pt-2 space-y-2",children:[{name:"View Payrolls",path:"/hr/payroll/payroll-view"},{name:"Generate Payroll",path:"/hr/payroll/generate"}].map(e=>(0,n.jsx)("li",{children:(0,n.jsx)("button",{onClick:()=>a.push(e.path),className:"w-full text-left text-sm px-3 py-2 bg-gray-700 rounded-lg hover:bg-indigo-500 transition",children:e.name})},e.name))})]}),(0,n.jsxs)("li",{children:[(0,n.jsxs)("button",{onClick:()=>{m(!u)},className:"w-full text-left flex justify-between items-center px-4 py-3 bg-gray-800 rounded-lg hover:bg-indigo-600 transition",children:[(0,n.jsx)("span",{children:"Compliance Management"}),u?(0,n.jsx)(s.A,{size:18}):(0,n.jsx)(c.A,{size:18})]}),u&&(0,n.jsx)("ul",{className:"pl-6 pt-2 space-y-2",children:[{name:"Employee Compliance",path:"/compliance/empCompliance"},{name:"Statutory Compliance",path:"/compliance/statutoryCompliance"},{name:"Document Center",path:"/compliance/documentCenter"},{name:"Policy Acknowledgements",path:"/compliance/policyAcknowledge"},{name:"Audit Logs",path:"/compliance/auditLog"},{name:"Reports & Filings",path:"/compliance/ReportFillings"}].map(e=>(0,n.jsx)("li",{children:(0,n.jsx)("button",{onClick:()=>a.push(e.path),className:"w-full text-left text-sm px-3 py-2 bg-gray-700 rounded-lg hover:bg-indigo-500 transition",children:e.name})},e.name))})]}),(0,n.jsxs)("li",{children:[(0,n.jsxs)("button",{onClick:()=>{h(!x)},className:"w-full text-left flex justify-between items-center px-4 py-3 bg-gray-800 rounded-lg hover:bg-indigo-600 transition",children:[(0,n.jsx)("span",{children:"Performance Management"}),x?(0,n.jsx)(s.A,{size:18}):(0,n.jsx)(c.A,{size:18})]}),x&&(0,n.jsx)("ul",{className:"pl-6 pt-2 space-y-2",children:[{name:"Goal Setting",path:"/hr/performance/goals"},{name:"Report Apraisal",path:"/hr/performance/reports"}].map(e=>(0,n.jsx)("li",{children:(0,n.jsx)("button",{onClick:()=>a.push(e.path),className:"w-full text-left text-sm px-3 py-2 bg-gray-700 rounded-lg hover:bg-indigo-500 transition",children:e.name})},e.name))})]}),(0,n.jsx)("li",{children:(0,n.jsx)("button",{onClick:t,className:"w-full text-left px-4 py-3 bg-red-600 hover:bg-red-700 transition rounded-lg mt-6",children:"Logout"})})]})]})}},11713:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var n=a(14232);let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),r=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),s=e=>{let t=r(e);return t.charAt(0).toUpperCase()+t.slice(1)},c=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,n.forwardRef)((e,t)=>{let{color:a="currentColor",size:l=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:o="",children:d,iconNode:p,...u}=e;return(0,n.createElement)("svg",{ref:t,...i,width:l,height:l,stroke:a,strokeWidth:s?24*Number(r)/Number(l):r,className:c("lucide",o),...u},[...p.map(e=>{let[t,a]=e;return(0,n.createElement)(t,a)}),...Array.isArray(d)?d:[d]])}),d=(e,t)=>{let a=(0,n.forwardRef)((a,r)=>{let{className:i,...d}=a;return(0,n.createElement)(o,{ref:r,iconNode:t,className:c("lucide-".concat(l(s(e))),"lucide-".concat(e),i),...d})});return a.displayName=s(e),a}},21575:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(11713).A)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},30822:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(11713).A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},42434:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/hr/payroll/form/[empid]",function(){return a(52604)}])},52604:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var n=a(37876),l=a(89099),r=a(14232),s=a(8643);function c(){let e=(0,l.useRouter)(),{empid:t}=e.query,[a,c]=(0,r.useState)(null),[i,o]=(0,r.useState)({basic_salary:"",hra_percent:40,da_percent:10,allowances:[{name:"",percent:20,include:!0}],deductions:[{name:"",percent:5,include:!0}],bonus:"",month:"",year:new Date().getFullYear(),hra_include:!0,da_include:!0,pf_percent:10,ptax_percent:10,esic_percent:10,pf_include:!0,ptax_include:!0,esic_include:!0});(0,r.useEffect)(()=>{t&&fetch("/api/hr/employees/".concat(t)).then(e=>e.json()).then(e=>c(e.employee)).catch(e=>console.error("Error fetching employee:",e))},[t]);let d=e=>(i.basic_salary||0)*e/100,p=e=>{let t="number"===e.target.type?""===e.target.value?"":parseFloat(e.target.value):e.target.value;o({...i,[e.target.name]:t})},u=(e,t)=>{let a=[...i.allowances];"percent"===t.target.name?a[e][t.target.name]=""===t.target.value?"":parseFloat(t.target.value):a[e][t.target.name]=t.target.value,o({...i,allowances:a})},m=(e,t)=>{let a=[...i.deductions];"percent"===t.target.name?a[e][t.target.name]=""===t.target.value?"":parseFloat(t.target.value):a[e][t.target.name]=t.target.value,o({...i,deductions:a})},x=e=>{let t=[...i.allowances];t.splice(e,1),o({...i,allowances:t})},h=e=>{let t=[...i.deductions];t.splice(e,1),o({...i,deductions:t})},g=async a=>{a.preventDefault();let n=i.hra_include?d(i.hra_percent):0,l=i.da_include?d(i.da_percent):0,r=i.pf_include?d(i.pf_percent):0,s=i.ptax_include?d(i.ptax_percent):0,c=i.esic_include?d(i.esic_percent):0,o=i.allowances.filter(e=>e.include).reduce((e,t)=>e+d(parseFloat(t.percent||0)),0),p=i.deductions.filter(e=>e.include).reduce((e,t)=>e+d(parseFloat(t.percent||0)),0)+r+s+c,u=parseFloat(i.basic_salary||0)+n+l+o+parseFloat(i.bonus||0)-p;(await fetch("/api/hr/payroll/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({empid:t,basic_salary:i.basic_salary,hra:n,da:l,allowances:o,deductions:p,pf:r,ptax:s,esic:c,bonus:i.bonus,net_pay:u,month:i.month,year:i.year})})).ok?(alert("Payroll generated!"),e.push("/hr/payroll/payroll-view")):alert("Error generating payroll")};return t?a?(0,n.jsxs)("div",{className:"flex min-h-screen",children:[(0,n.jsx)(s.A,{handleLogout:()=>{}}),(0,n.jsx)("div",{className:"flex-1 flex justify-center items-center p-4",children:(0,n.jsxs)("div",{className:"w-full max-w-4xl bg-white shadow-lg p-5 rounded-xl text-indigo-800",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold mb-4 text-center",children:"Generate Payroll Form"}),(0,n.jsx)("br",{}),(0,n.jsxs)("form",{onSubmit:g,className:"space-y-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsx)("input",{value:a.empid,readOnly:!0,className:"bg-gray-100 p-2 rounded text-center"}),(0,n.jsx)("input",{value:a.name,readOnly:!0,className:"bg-gray-100 p-2 rounded text-center"}),(0,n.jsx)("input",{value:a.email,readOnly:!0,className:"bg-gray-100 p-2 rounded text-center"}),(0,n.jsx)("input",{value:a.contact_number,readOnly:!0,className:"bg-gray-100 p-2 rounded text-center"})]}),(0,n.jsx)("br",{}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"mb-2",children:"MONTH"}),(0,n.jsxs)("select",{name:"month",value:i.month,onChange:p,className:"w-full p-2 border rounded text-center mb-2",required:!0,children:[(0,n.jsx)("option",{value:"",children:"Select Month"}),["January","February","March","April","May","June","July","August","September","October","November","December"].map(e=>(0,n.jsx)("option",{value:e,children:e},e))]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block mb-2",children:"YEAR"}),(0,n.jsx)("input",{type:"number",name:"year",value:i.year,onChange:p,className:"w-full p-2 border rounded text-center mb-2"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block",children:"BASIC SALARY (₹)"}),(0,n.jsx)("input",{type:"number",name:"basic_salary",value:i.basic_salary,onChange:p,className:"w-full p-2 border rounded text-center",required:!0})]}),(0,n.jsx)("label",{className:"block",children:"ALLOWANCE (%)"}),(0,n.jsx)("br",{}),["hra","da"].map((e,t)=>(0,n.jsx)("div",{className:"flex items-center justify-between space-x-10 text-center",children:(0,n.jsxs)("div",{className:"flex items-center space-x-6 p-1",children:[(0,n.jsx)("input",{type:"checkbox",checked:i["".concat(e,"_include")],onChange:()=>{o(t=>({...t,["".concat(e,"_include")]:!t["".concat(e,"_include")]}))},className:"h-4 w-4 ml-9"})," ",(0,n.jsxs)("div",{className:"uppercase w-50 text-center",children:[e," (%)"]}),(0,n.jsx)("input",{type:"number",name:"".concat(e,"_percent"),value:i["".concat(e,"_percent")],onChange:p,className:"p-2 border rounded text-center ml-2"}),(0,n.jsx)("input",{value:d(i["".concat(e,"_percent")]).toFixed(2),readOnly:!0,className:"p-2 bg-gray-100 rounded text-center"})]})},t)),(0,n.jsxs)("div",{children:[i.allowances.map((e,t)=>(0,n.jsx)("div",{className:"flex items-center justify-between space-x-7 text-center",children:(0,n.jsxs)("div",{className:"flex items-center space-x-5 p-1",children:[(0,n.jsx)("input",{type:"checkbox",checked:e.include,onChange:()=>{let e=[...i.allowances];e[t].include=!e[t].include,o({...i,allowances:e})},className:"h-4 w-6 ml-9"})," ",(0,n.jsx)("input",{type:"text",name:"name",value:e.name,onChange:e=>u(t,e),placeholder:"Allowance Name",className:"p-2 border rounded w-1/3 text-center uppercase"}),(0,n.jsx)("input",{type:"number",name:"percent",value:e.percent,onChange:e=>u(t,e),placeholder:"Percentage",className:"p-2 border rounded w-1/3 text-center"}),(0,n.jsx)("input",{value:d(parseFloat(e.percent||0)).toFixed(2),readOnly:!0,className:"p-2 bg-gray-100 rounded w-1/3 text-center"}),"   ",(0,n.jsx)("button",{type:"button",onClick:()=>x(t),className:"text-red-600 hover:text-red-800 text-center ",children:"X"})]})},t)),(0,n.jsx)("button",{type:"button",onClick:()=>{o({...i,allowances:[...i.allowances,{name:"",percent:0,include:!0}]})},className:"mt-3 text-indigo-600 hover:text-indigo-800",children:"+ Add Allowance"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block",children:"DEDUCTION (%)"}),(0,n.jsx)("br",{}),["pf","ptax","esic"].map(e=>(0,n.jsxs)("div",{className:"flex items-center justify-between space-x-6 text-center p-1",children:[(0,n.jsx)("input",{type:"checkbox",checked:i["".concat(e,"_include")],onChange:()=>{o(t=>({...t,["".concat(e,"_include")]:!t["".concat(e,"_include")]}))},className:"h-4 w-4 ml-9"})," ",(0,n.jsxs)("div",{className:"uppercase w-50 text-center",children:[e.toUpperCase()," (%)"]}),(0,n.jsx)("input",{type:"number",name:"".concat(e,"_percent"),value:i["".concat(e,"_percent")],onChange:p,className:"p-2 border rounded text-center ml-2 w-1/4"}),(0,n.jsx)("input",{value:d(i["".concat(e,"_percent")]).toFixed(2),readOnly:!0,className:"p-2 bg-gray-100 rounded text-center w-1/4"})]},e)),i.deductions.map((e,t)=>(0,n.jsx)("div",{className:"flex items-center justify-between space-x-4 p-3",children:(0,n.jsxs)("div",{className:"flex items-center space-x-4 ",children:["  ",(0,n.jsx)("input",{type:"checkbox",checked:e.include,onChange:()=>{let e=[...i.deductions];e[t].include=!e[t].include,o({...i,deductions:e})},className:"h-4 w-4"})," ",(0,n.jsx)("input",{type:"text",name:"name",value:e.name,onChange:e=>m(t,e),placeholder:"Deduction Name",className:"p-2 border rounded w-1/3 text-center uppercase"}),(0,n.jsx)("input",{type:"number",name:"percent",value:e.percent,onChange:e=>m(t,e),placeholder:"Percentage",className:"p-2 border rounded w-1/3 text-center"}),(0,n.jsx)("input",{value:d(parseFloat(e.percent||0)).toFixed(2),readOnly:!0,className:"p-2 bg-gray-100 rounded w-1/3 text-center"}),"  ",(0,n.jsx)("button",{type:"button",onClick:()=>h(t),className:"text-red-600 hover:text-red-800",children:"X"})]})},t)),(0,n.jsx)("button",{type:"button",onClick:()=>{o({...i,deductions:[...i.deductions,{name:"",percent:0,include:!0}]})},className:"mt-2 text-red-600 hover:text-red-800",children:"+ Add Deduction"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block mb-2",children:"BONUS (₹)"}),(0,n.jsx)("input",{type:"number",name:"bonus",value:i.bonus,onChange:p,className:"w-full p-2 border rounded text-center"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block font-medium mb-2",children:"NET PAY (₹)"}),(0,n.jsx)("input",{type:"number",value:parseFloat(i.basic_salary||0)+(i.hra_include?d(i.hra_percent):0)+(i.da_include?d(i.da_percent):0)+i.allowances.filter(e=>e.include).reduce((e,t)=>e+d(parseFloat(t.percent||0)),0)+parseFloat(i.bonus||0)-(i.deductions.filter(e=>e.include).reduce((e,t)=>e+d(parseFloat(t.percent||0)),0)+(i.pf_include?d(i.pf_percent):0)+(i.ptax_include?d(i.ptax_percent):0)+(i.esic_include?d(i.esic_percent):0)),readOnly:!0,className:"w-full p-2 bg-gray-100 rounded text-center"})]}),(0,n.jsx)("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded mt-6 hover:bg-blue-700",children:"Generate Payroll"})]})]})})]}):(0,n.jsx)("div",{className:"p-6",children:"Loading employee data..."}):(0,n.jsx)("div",{className:"p-6",children:"Waiting for employee ID..."})}},89099:(e,t,a)=>{e.exports=a(48253)}},e=>{var t=t=>e(e.s=t);e.O(0,[636,6593,8792],()=>t(42434)),_N_E=e.O()}]);